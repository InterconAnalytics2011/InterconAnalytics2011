<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>_trackJsError with GA - jsFiddle demo by phms</title>
  <script type='text/javascript' src='/js/lib/dummy.js'></script>
  
  
  <link rel="stylesheet" type="text/css" href="/css/result-light.css">
  
  <style type='text/css'>
    
  </style>
  
  <script type='text/javascript'>
  //<![CDATA[ 
  
  function _trackJsError(exception) {
    exception = exception || {};
    if (typeof(_gaq) === "object") {
        _gaq.push(['_trackEvent',
             'JS Exception ' + (exception.name || 'Error'),
             (exception.message || exception),
             document.location.href
             ]);
    }

    /* DEBUG */
    document.getElementById("error").innerHTML += ('JS Exception ' + (exception.name || 'Error') + "<br>Message: " + (exception.message || exception || '(message empty)') + "<br>URL: " + document.location.href +'<hr>');
}
  
  //]]> 
  </script>
  
</head>
<body>
  <h1>_trackJsError with GA</h1>
<p><b>Tracking javascript errors using the Google Analytics.</b></p>

<script type="text/javascript">
    /* Traditional snippet of Google Analytics Tracking Code */
    
    var _gaq = _gaq || [];
    _gaq.push(
        ['_setAccount','UA-17169655-2'],
        ['_trackPageview']
    );
    
    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = 'http://www.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>

<hr><pre id="error"></pre>

<script type="text/javascript">
    try{
        var i = 1/new_variable; // Error 1!
    }
    catch(e){
        _trackJsError(e);
    }
    
    try{
        var i = 1/new_variable; // Error 2!
    }
    catch(e){
        _trackJsError("Custom error message...");
    }
</script>



<p>This function should be used in the "try / catch" statement.<br>
Don't forget to remove the "alert"!</p>
<p><b>Compatibility:</b></p>
<ul>
    <li>Chrome - OK</li>
    <li>Firefox - OK</li>
    <li>Internet Explorer - OK</li>
    <li>Safari - OK</li>
    <li>Opera - OK</li>
</ul>
<p><b>For other suggestions about error tracking, consult:</b></p>
<ul>
    <li>http://jsfiddle.net/phms/D7GPs/</li>
    <li>http://jsfiddle.net/phms/GAyrK/</li>
    <li>http://jsfiddle.net/phms/nWdzR/</li>
    <li>http://jsfiddle.net/phms/tuQdd/</li>
</ul>
  
</body>


</html>

